<!-- build time:Sat May 30 2020 00:38:02 GMT+0800 (China Standard Time) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon_32.ico"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon_16.ico"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto Slab:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.guitu18.com").hostname,root:"/",scheme:"Gemini",version:"7.6.0",exturl:!1,sidebar:{position:"right",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:"mac"},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!0,mediumzoom:!1,lazyload:!1,pangu:!0,comments:{style:"tabs",active:"valine",storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!1,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},path:"",motion:{enable:!0,async:!0,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="keywords" content="夜月归途,个人博客,guitu18,原创Java技术分享"><meta name="description" content="用实力让情怀落地"><meta property="og:type" content="website"><meta property="og:title" content="夜月归途"><meta property="og:url" content="https://www.guitu18.com/page/4/index.html"><meta property="og:site_name" content="夜月归途"><meta property="og:description" content="用实力让情怀落地"><meta property="og:locale" content="zh_CN"><meta property="article:author" content="guitu18"><meta property="article:tag" content="夜月归途"><meta property="article:tag" content="个人博客"><meta property="article:tag" content="guitu18"><meta property="article:tag" content="原创Java技术分享"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.guitu18.com/page/4/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!0,isPost:!1}</script><title>夜月归途 - 一个安静的小角落</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?827f811db6b41b489d3e11e73a29f977";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">夜月归途</span> <span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">一个安静的小角落</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a></li><li class="menu-item menu-item-链接"><a href="/links/" rel="section"><i class="fa fa-fw fa-link"></i>链接</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a></li><li class="menu-item menu-item-笔记"><a href="https://note.guitu18.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-book"></i>笔记</a></li></ul></nav></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.guitu18.com/post/2019/01/05/25.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="guitu18"><meta itemprop="description" content="用实力让情怀落地"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="夜月归途"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/post/2019/01/05/25.html" class="post-title-link" itemprop="url">JDK动态代理深入理解分析并手写简易JDK动态代理（下）</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-01-05 02:48:48" itemprop="dateCreated datePublished" datetime="2019-01-05T02:48:48+08:00">2019-01-05</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">学习</span> </a></span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%AD%A6%E4%B9%A0/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>10k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>9 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>上篇分析的是JDK动态代理实现原理，这篇是一个自实现的动态代理案例，这一篇我们自定义代理Proxy，代理业务需要实现的Handler接口，以及类加载器ClassLoader；最终我们以自己写的代码去生成代理类的代码，再用代理类的代码去代理执行我们的业务代码，完成一套标准的动态代理；</p><p>本博客关于Java动态代理相关内容直达链接：</p><ol><li><a href="https://www.guitu18.com/post/2018/05/27/15.html">JDK动态代理浅析</a></li><li><a href="https://www.guitu18.com/post/2018/05/27/16.html">Cglib动态代理浅析</a></li><li><a href="https://www.guitu18.com/post/2019/01/03/24.html">JDK动态代理深入理解分析并手写简易JDK动态代理（上）</a></li><li><a href="https://www.guitu18.com/post/2019/01/05/25.html">JDK动态代理深入理解分析并手写简易JDK动态代理（下）</a></li></ol><p>上篇分析的是JDK动态代理实现原理，这个下篇是一个自实现的动态代理案例，这一篇我们自定义代理Proxy，代理业务需要实现的Handler接口，以及类加载器ClassLoader；最终我们以自己写的代码去生成代理类的代码，再用代理类的代码去代理执行我们的业务代码，完成一套标准的动态代理流程；</p><p>首先我们分析实现代理需要什么，下面是Proxy生成代理类的newProxyInstance()方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Proxy.newProxyInstance(ClassLoader loader, Class&lt;?&gt;[] interfaces, InvocationHandler h)</span><br></pre></td></tr></table></figure><p>一个代理类Proxy，一个ClassLoader，一个业务类实现的接口数组，一个InvocationHandler；<br>把这里的步骤拆分一下就是下面的两步：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>. Proxy其实就是根据传递给它的参数Class&lt;?&gt;[] interfaces去生成代理类$Proxy0；  </span><br><span class="line"><span class="number">2</span>. 用ClassLoader loader去加载生成的这个代理类$Proxy0，然后返回$Proxy0实例的引用；</span><br></pre></td></tr></table></figure><p>现在一步步来做，在Proxy中，我们大致可以细分为4步：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>. 动态生成代理类的源代码.java文件，并写入到磁盘；</span><br><span class="line"><span class="number">2</span>. 把生成的.java文件编译成<span class="class">.<span class="keyword">class</span>文件；</span></span><br><span class="line"><span class="class">3. 把编译的.<span class="title">class</span>文件加载到<span class="title">JVM</span>；</span></span><br><span class="line"><span class="class">4. 返回动态生成的代理对象；</span></span><br></pre></td></tr></table></figure><p>那么GuituDynamicProxy类完成后的代码如下（相当于Proxy）：</p><div class="post-button"><a class="btn" href="/post/2019/01/05/25.html#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.guitu18.com/post/2019/01/03/24.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="guitu18"><meta itemprop="description" content="用实力让情怀落地"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="夜月归途"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/post/2019/01/03/24.html" class="post-title-link" itemprop="url">JDK动态代理深入理解分析并手写简易JDK动态代理（上）</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-01-03 10:10:29" itemprop="dateCreated datePublished" datetime="2019-01-03T10:10:29+08:00">2019-01-03</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">学习</span> </a></span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%AD%A6%E4%B9%A0/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>5.7k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>5 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>博客真的是好几个月没更了，2019新年第一篇，继续深入动态代理，前两篇简单分析了动态代理的实现原理之后，这次继续深入了解具体的实现方式，并手写一套简易的动态代理已加强理解；</p><p>本博客关于Java动态代理相关内容直达链接：</p><ol><li><a href="https://www.guitu18.com/post/2018/05/27/15.html">JDK动态代理浅析</a></li><li><a href="https://www.guitu18.com/post/2018/05/27/16.html">Cglib动态代理浅析</a></li><li><a href="https://www.guitu18.com/post/2019/01/03/24.html">JDK动态代理深入理解分析并手写简易JDK动态代理（上）</a></li><li><a href="https://www.guitu18.com/post/2019/01/05/25.html">JDK动态代理深入理解分析并手写简易JDK动态代理（下）</a></li></ol><p>博客真的是好几个月没更了，2019新年第一篇，继续深入动态代理，前两篇简单分析了动态代理的实现原理之后，这次继续深入了解具体的实现方式，并手写一套简易的动态代理已加强理解；<br>先接上一篇代码，这里先上代码说话，一个简单案列，代理找对象和找工作：</p><p>JDK动态代理只能代理有接口的类，定义Persion接口</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.guitu18.study.proxy;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhangkuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@email</span> xianjian-mail@qq.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2018/12/31 20:30</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Persion</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 找对象</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> condition 对另一半的要求</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 表态</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">String <span class="title">findLove</span><span class="params">(String condition)</span></span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 找工作</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">findWord</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="post-button"><a class="btn" href="/post/2019/01/03/24.html#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.guitu18.com/post/2018/08/30/23.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="guitu18"><meta itemprop="description" content="用实力让情怀落地"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="夜月归途"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/post/2018/08/30/23.html" class="post-title-link" itemprop="url">CentOS 7 搭建FTP服务器和详细权限配置</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-08-30 10:54:49" itemprop="dateCreated datePublished" datetime="2018-08-30T10:54:49+08:00">2018-08-30</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">学习</span> </a></span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%AD%A6%E4%B9%A0/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>3.7k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>3 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>公司有个落地页需要我们放在阿里云上，但是他们经常需要改动，我们每次都帮他们发布有些繁琐，索性弄一个FTP服务让他们自个上传去，按照百度的各种教程搭建了，虽然步骤简单但是过程中还是有不少小坑，看了好多个帖子才弄好了，国际惯例，记录学习过程；</p><h2 id="一、安装："><a href="#一、安装：" class="headerlink" title="一、安装："></a>一、安装：</h2><p>直接使用yum方式安装：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum install vsftpd</span><br><span class="line"></span><br><span class="line">相关操作：</span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动|停止|重启  </span></span><br><span class="line">service vsftpd start|stop|restart</span><br></pre></td></tr></table></figure><p>添加用户：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">一般出于安全考虑，ftp用户是不允许登陆系统的，且只能访问自己主目录下的文件</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 先创建ftp根目录</span></span><br><span class="line">mkdir -p /home/ftp</span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加用户并指定目录和用户组，设置为不可登陆系统</span></span><br><span class="line">useradd -d /home/ftp/guitu -g ftp -s /sbin/nologin guitu</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> -d 命令是指定用户主目录</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -g 是指定用户分组</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -s /sbin/nologin 禁止用户登陆系统</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> guitu 新建ftp用户的用户名。</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 为用户 guitu 设置密码，按提示操作输入两次密码：</span></span><br><span class="line">passwd guitu</span><br></pre></td></tr></table></figure><h2 id="二、配置："><a href="#二、配置：" class="headerlink" title="二、配置："></a>二、配置：</h2><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置文件默认在 /etc/vsftpd/vsftpd.conf</span></span><br><span class="line"><span class="comment"># 具体的配置项说明太多了，贴在最后，这里说一下在默认配置中需要修改的部分</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改为NO，关闭匿名用户访问</span></span><br><span class="line"><span class="attr">anonymous_enable</span>=<span class="string">NO</span></span><br></pre></td></tr></table></figure><p>重启vsftpd服务，这时候使用ftp工具应该就能连接上了（比如FIleZilla），别忘记防火墙放行端口，ftp默认端口是21；<br>但是连上之后会发现<strong>刚添加的用户guitu能够跳到上一层目录，访问系统中其他的目录，guitu作为ftp用户组的成员，此时对于其他目录guitu是拥有着ftp用户组的权限的，这时候需要限制guitu只能访问其自身根目录</strong>；</p><div class="post-button"><a class="btn" href="/post/2018/08/30/23.html#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.guitu18.com/post/2018/08/18/22.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="guitu18"><meta itemprop="description" content="用实力让情怀落地"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="夜月归途"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/post/2018/08/18/22.html" class="post-title-link" itemprop="url">Linux定时任务+Mailx实现数据库自动备份并发送备份文件到指定邮箱</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-08-18 01:45:35" itemprop="dateCreated datePublished" datetime="2018-08-18T01:45:35+08:00">2018-08-18</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">学习</span> </a></span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%AD%A6%E4%B9%A0/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>5k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>5 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>前段时间不是出了腾讯云服务器丢失导致一家创业公司几乎被摧毁的事件嘛，云服务终归不是百分之百可靠，虽然我还是比较相信阿里，但是有备无患不是吗；服务器上的数据库我是有每天做定时备份的，但都是备份到服务器本地，现在我想的是，能不能把备份的文件文件定时发送到我自己的邮箱，多做一份远程备份；这里就用到了mailx发送邮件的功能了；</p><p>先要说一下的是，现在很多博客文档复制粘贴的太多了，我找的好多mailx的教程都是各种不能用，后面各种折腾终于配置成功后我决定要自己写一篇博文记录一下；</p><h2 id="一、安装和配置mailx"><a href="#一、安装和配置mailx" class="headerlink" title="一、安装和配置mailx"></a>一、安装和配置mailx</h2><h4 id="首先需要安装mailx，yum安装方式非常简单"><a href="#首先需要安装mailx，yum安装方式非常简单" class="headerlink" title="首先需要安装mailx，yum安装方式非常简单"></a>首先需要安装mailx，yum安装方式非常简单</h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install</span> mailx -y</span><br></pre></td></tr></table></figure><h4 id="配置：配置文件默认是-etc-mail-rc"><a href="#配置：配置文件默认是-etc-mail-rc" class="headerlink" title="配置：配置文件默认是/etc/mail.rc"></a>配置：配置文件默认是/etc/mail.rc</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">vim</span> <span class="string">/etc/mail.rc</span></span><br><span class="line"><span class="comment"># 直接在文件末尾添加如下内容：</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">set</span> <span class="string">ssl-verify=ignore</span></span><br><span class="line"><span class="comment">    # 这里使用的是我服务器的默认位置，此处有个坑，下面会讲</span></span><br><span class="line">    <span class="attr">set</span> <span class="string">nss-config-dir=/etc/pki/nssdb</span></span><br><span class="line"><span class="comment">    # 发送地址</span></span><br><span class="line">    <span class="attr">set</span> <span class="string">from=123456@qq.com</span></span><br><span class="line"><span class="comment">    # 邮件服务商smtp服务地址</span></span><br><span class="line">    <span class="attr">set</span> <span class="string">smtp=smtps://smtp.qq.com:465</span></span><br><span class="line"><span class="comment">    # 登陆邮箱，同上发送地址相同即可</span></span><br><span class="line">    <span class="attr">set</span> <span class="string">smtp-auth-user=123456@qq.com</span></span><br><span class="line"><span class="comment">    # 邮箱登陆授权密码，不是登陆密码，SMTP服务通常都是授权码登陆，开通SMTP服务时会提供登陆授权码</span></span><br><span class="line"><span class="comment">    # 具体怎么开通SMTP服务及获取授权码请自行百度，这里不作展开</span></span><br><span class="line">    <span class="attr">set</span> <span class="string">smtp-auth-password=abcabc</span></span><br><span class="line">    <span class="attr">set</span> <span class="string">smtp-auth=login</span></span><br></pre></td></tr></table></figure><p>正常来说，这么配置完成之后就可以使用mailx命令发送邮件了；</p><h4 id="发送一封测试邮件："><a href="#发送一封测试邮件：" class="headerlink" title="发送一封测试邮件："></a>发送一封测试邮件：</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mailx -vs "测试邮件" -a ./test.txt xianjian-mail@qq.com&lt;./test.txt</span><br><span class="line">命令参数说明：</span><br><span class="line">        -v 是显示发送过程</span><br><span class="line">        -s 是指定邮件主题</span><br><span class="line">        -a 是发送附件，后面是附件文件地址</span><br><span class="line">邮件地址后面的 &lt;./test.txt 是写入到邮件正文的文本文件地址，需要提前编辑好</span><br></pre></td></tr></table></figure><div class="post-button"><a class="btn" href="/post/2018/08/18/22.html#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.guitu18.com/post/2018/08/11/21.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="guitu18"><meta itemprop="description" content="用实力让情怀落地"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="夜月归途"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/post/2018/08/11/21.html" class="post-title-link" itemprop="url">Java Pattern和Matcher详解 [转载]</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-08-11 01:59:18" itemprop="dateCreated datePublished" datetime="2018-08-11T01:59:18+08:00">2018-08-11</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">学习</span> </a></span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%AD%A6%E4%B9%A0/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>4.6k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>4 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>最近玩了玩微信公众号开发之后，想写一个爬虫为公众号爬一点数据；在测试过程中，需要获取页面的所有链接，比较快捷的办法是使用正则表达式直接匹配，那么Java中的字符串正则用的是Pattern和Matcher结合，功能还是蛮强大的；我平时工作中对这两个类接触的少，具体的使用这篇博文写的很详细，转载记录一下；</p><p>转载自：<a href="http://blog.csdn.net/cclovett/article/details/12448843/" target="_blank" rel="noopener">http://blog.csdn.net/cclovett/article/details/12448843/</a></p><p>结论：</p><blockquote><p>Pattern与Matcher一起合作.Matcher类提供了对正则表达式的分组支持,以及对正则表达式的多次匹配支持.<br><strong>单独用Pattern只能使用Pattern.matches(String regex,CharSequence input)一种最基础最简单的匹配</strong>。</p></blockquote><p>java正则表达式通过java.util.regex包下的Pattern类与Matcher类实现(建议在阅读本文时,打开java API文档,当介绍到哪个方法时,查看java API中的方法说明,效果会更佳).</p><p><strong>Pattern类用于创建一个正则表达式,也可以说创建一个匹配模式,它的构造方法是私有的,不可以直接创建,但可以通过Pattern.complie(String regex)简单工厂方法创建一个正则表达式;</strong></p><blockquote><p>Java代码示例:</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Pattern p=Pattern.compile(<span class="string">"\\w+"</span>); </span><br><span class="line">p.pattern();<span class="comment">//返回 \w+ </span></span><br><span class="line"></span><br><span class="line">pattern() 返回正则表达式的字符串形式,其实就是返回Pattern.complile(String regex)的regex参数</span><br></pre></td></tr></table></figure><div class="post-button"><a class="btn" href="/post/2018/08/11/21.html#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.guitu18.com/post/2018/08/08/19.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="guitu18"><meta itemprop="description" content="用实力让情怀落地"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="夜月归途"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/post/2018/08/08/19.html" class="post-title-link" itemprop="url">Linux系统SVN版本控制服务搭建：独立服务器运行和Apache方式运行</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-08-08 12:46:09" itemprop="dateCreated datePublished" datetime="2018-08-08T12:46:09+08:00">2018-08-08</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">学习</span> </a></span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%AD%A6%E4%B9%A0/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>4.6k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>4 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>作为一名程序员，版本控制工具肯定是接触的非常多的，国内公司一般用的是Git个SVN，我比较常用的是SVN，SVN全程Subversion，是一个自由开源的版本控制系统，SVN有两种运行方式：独立服务器和结合Apache运行，今天就分别就这两种运行方式做一下分析和测试</p><h2 id="一、独立服务器运行"><a href="#一、独立服务器运行" class="headerlink" title="一、独立服务器运行"></a>一、独立服务器运行</h2><ol><li><p>安装是在阿里云ECS上进行</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">系统：Centos 7  </span><br><span class="line">IP:47.100.199.117  </span><br><span class="line">客户端环境分别是阿里云ECS和本地Windows环境；</span><br></pre></td></tr></table></figure></li><li><p>安装SVN</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 直接使用yum方式安装</span></span><br><span class="line">yum install -y subversion</span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建SVN仓库文件夹</span></span><br><span class="line">mkdir -p /var/svn/repo</span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建仓库</span></span><br><span class="line">svnadmin create /var/svn/repo</span><br></pre></td></tr></table></figure></li><li><p>创建完成之后进入 /var/svn/repo 可以看到如下结构</p></li></ol><div class="post-button"><a class="btn" href="/post/2018/08/08/19.html#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.guitu18.com/post/2018/08/08/20.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="guitu18"><meta itemprop="description" content="用实力让情怀落地"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="夜月归途"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/post/2018/08/08/20.html" class="post-title-link" itemprop="url">一个JAVA程序员成长之路分享 [转载]</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-08-08 10:49:27" itemprop="dateCreated datePublished" datetime="2018-08-08T10:49:27+08:00">2018-08-08</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E7%94%9F%E6%B4%BB/" itemprop="url" rel="index"><span itemprop="name">生活</span> </a></span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E7%94%9F%E6%B4%BB/%E7%BD%91%E7%BB%9C%E6%9D%A5%E6%BA%90/" itemprop="url" rel="index"><span itemprop="name">网络来源</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>4k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>4 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>我搞JAVA也有些日子了, 因为我比较贪玩,上进心不那么强, 总是逼不得已为了高薪跳槽才去学习, 所以也没混成什么大牛, 但好在现在也已经成家立业, 小日子过的还算滋润, 起码顶得住一月近万元的吃喝拉撒玩各种贷款信用卡 不为金钱过于发愁了。 我特别感谢当初贴吧遇见的那位大神, 虽然每个月也就聊那么几句, 但是他总能在我不知道该学啥, 该怎么走的时候, 给我方向, 毫不夸张的说,我现在的衣食无忧, 技术马马虎虎, 都是拜他所赐。 所以 我也想分享一些自己的成长过程 以及技术路线 希望一些迷茫的新人,或者想转行但是踌躇不前的老哥老弟们 能够得到一些建议吧。</p><p>其实这行的工资待遇和前景,比起一些风吹日晒的苦逼行业 还是要好不少的, 很多人说程序员累, 加班 , 掉头发 但其实在生存压力面前 这都不算什么, 有哪一行是轻松的呢？起码程序员技术到位了，工资还是比较可观的。</p><p><strong>那么 入门的新手 要达到一个什么水平才能找到工作养活自己呢？</strong></p><p>首先 JAVA基础语法：集合类 线程 IO操作, 这些掌握了 基础算是过关了, IO操作有点麻烦 被搞晕没关系, 知道什么时候用 用到了 再去搜索就行。</p><p>其次 web部分:servlet jsp session cookie mysql数据库, 都要知道怎么操作怎么用; 前端页面的话 html不必太深 能看懂就行 ,js或者jquery会操作dom能够把后台数据放到合适的位置就可以, 现在前段js技术五花八门 基本很少有项目让后台弄前端了, 如果有并且很长时间了 你可以考虑跳槽了……</p><p>学到这个阶段,你需要知道一个请求从页面或者移动端发起之后 经历什么样的过程再返回去的 知道ajax是什么 会发起异步请求到后台 。</p><div class="post-button"><a class="btn" href="/post/2018/08/08/20.html#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.guitu18.com/post/2018/07/26/18.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="guitu18"><meta itemprop="description" content="用实力让情怀落地"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="夜月归途"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/post/2018/07/26/18.html" class="post-title-link" itemprop="url">JaveWeb学习之Servlet（二）：ServletConfig和ServletContext</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-07-26 11:15:55" itemprop="dateCreated datePublished" datetime="2018-07-26T11:15:55+08:00">2018-07-26</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">学习</span> </a></span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%AD%A6%E4%B9%A0/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>7.4k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>7 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>这几天因为工作的关系，忙了好几天，博客几天没有更新，进度慢了，要加油了；接着简单分析一下ServletConfig和ServletContext两大对象；ServletConfig和ServletContext最常见的使用之一就是传递初始化参数，比如我们最常用的在Spring中配置contextConfigLocation；</p><h2 id="ServletConfig"><a href="#ServletConfig" class="headerlink" title="ServletConfig"></a>ServletConfig</h2><p>继续查看ServletConfig源码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> javax.servlet;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ServletConfig</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getServletName</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletContext <span class="title">getServletContext</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getInitParameter</span><span class="params">(String name)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Enumeration&lt;String&gt; <span class="title">getInitParameterNames</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="getServletName"><a href="#getServletName" class="headerlink" title="getServletName();"></a>getServletName();</h3><blockquote><p>getServletName方法用于获取当前Servlet名称，这个是在xml中配置的：<servlet-name>springmvcdemo</servlet-name>；</p></blockquote><h3 id="getServletContext"><a href="#getServletContext" class="headerlink" title="getServletContext();"></a>getServletContext();</h3><blockquote><p>getServletContext方法用于获取代表当前web应用的ServletContext对象；</p></blockquote><h3 id="getInitParameter-String-name"><a href="#getInitParameter-String-name" class="headerlink" title="getInitParameter(String name);"></a>getInitParameter(String name);</h3><blockquote><p>getInitParameter方法用于获取当前Servlet指定名称的初始化参数的值；</p></blockquote><h3 id="getInitParameterNames"><a href="#getInitParameterNames" class="headerlink" title="getInitParameterNames();"></a>getInitParameterNames();</h3><blockquote><p>getInitParameterNames获取当前Servlet所有初始化参数的名字枚举集合；</p></blockquote><p>Servlet容器初始化时每一个Servlet对象时，会为其创建一个ServletConfig对象，通过Servlet的init方法，会把ServletContext对象传递给当前Servlet：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException</span>;</span><br></pre></td></tr></table></figure><p>之后使用this.getServletConfig()对象获取当前Servlet的ServletConfig对象；</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ServletConfig servletConfig = getServletConfig();</span><br></pre></td></tr></table></figure><p>我们在xml中配置Servlet时，还可以配置Servlet初始化参数信息：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;servlet&gt;</span><br><span class="line">    &lt;servlet-name&gt;Servlet_1&lt;/servlet-name&gt;</span><br><span class="line">    &lt;servlet-<span class="class"><span class="keyword">class</span>&gt;<span class="title">com</span>.<span class="title">guitu</span>.<span class="title">servlet</span>.<span class="title">Servlet_1</span>&lt;/<span class="title">servlet</span>-<span class="title">class</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">init</span>-<span class="title">param</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">param</span>-<span class="title">name</span>&gt;<span class="title">username</span>&lt;/<span class="title">param</span>-<span class="title">name</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">param</span>-<span class="title">value</span>&gt;<span class="title">zhangkuan</span>&lt;/<span class="title">param</span>-<span class="title">value</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">init</span>-<span class="title">param</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">servlet</span>&gt;</span></span><br></pre></td></tr></table></figure><p>之后可以通过servletConfig获取InitParameter参数；</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Enumeration&lt;String&gt; initParameterNames = servletConfig.getInitParameterNames()<span class="comment">;java</span></span><br></pre></td></tr></table></figure><p>获得的是一个参数名字的枚举集合，在调用getInitParameter(String name)即可获得参数的值：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String initParameter = servletConfig.getInitParameter(parameterName);</span><br></pre></td></tr></table></figure><div class="post-button"><a class="btn" href="/post/2018/07/26/18.html#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.guitu18.com/post/2018/07/22/17.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="guitu18"><meta itemprop="description" content="用实力让情怀落地"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="夜月归途"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/post/2018/07/22/17.html" class="post-title-link" itemprop="url">JaveWeb学习之Servlet（一）：Servlet生命周期和加载机制</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-07-22 02:07:01" itemprop="dateCreated datePublished" datetime="2018-07-22T02:07:01+08:00">2018-07-22</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">学习</span> </a></span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%AD%A6%E4%B9%A0/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>4.5k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>4 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>Servlet（Server Applet）是Java Servlet的简称，称为小服务程序或服务连接器，用Java编写的服务器端程序，主要功能在于交互式地浏览和修改数据，生成动态Web内容。</p><h2 id="Servlet生命周期和加载机制"><a href="#Servlet生命周期和加载机制" class="headerlink" title="Servlet生命周期和加载机制"></a>Servlet生命周期和加载机制</h2><p>最近打算翻看学习一下Spring源码，先从JavaWeb过起；<br>查看Servlet3.1源码，其接口定义如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> javax.servlet;  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Servlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig config)</span> </span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> ServletException</span>; </span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletConfig <span class="title">getServletConfig</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest req, ServletResponse res)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> ServletException, IOException</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getServletInfo</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="init-ServletConfig-config"><a href="#init-ServletConfig-config" class="headerlink" title="init(ServletConfig config);"></a>init(ServletConfig config);</h3><blockquote><p>init方法在容器启动时会被容器调用，且只会被调用一次；<br>调用的时机是跟Servlet的配置项’load-on-startup’有关系的；</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvcdemo<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p><load-on-startup>1</load-on-startup>：配置的值如果不小于0，那么标识容器在启动时就会加载这个Servlet，配置的值越小，加载的优先级越高；如果没有配置或者配置的值小于0时，容器会在该Servlet第一次被调用时才会被加载；不论哪种配置，init方法只会被调用一次；</p><p>init方法的参数，是容器传进去的；我们在web.xml中配置的contextConfigLocation参数，就保存在ServletConfig中；</p><p>这项参数我们不配置的话，它有默认值：WEB-INF/${ServletName}-servlet.xml，变量${ServletName}是xml中配置的’servlet-name’;</p></blockquote><div class="post-button"><a class="btn" href="/post/2018/07/22/17.html#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.guitu18.com/post/2018/05/27/16.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="guitu18"><meta itemprop="description" content="用实力让情怀落地"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="夜月归途"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/post/2018/05/27/16.html" class="post-title-link" itemprop="url">Cglib动态代理浅析</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-05-27 10:36:37" itemprop="dateCreated datePublished" datetime="2018-05-27T10:36:37+08:00">2018-05-27</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">学习</span> </a></span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%AD%A6%E4%B9%A0/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>4k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>4 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>Java中的动态代理设计模式是非常经典且非常重要的设计模式之一，在感叹设计者的天才设计至于，我们想去探究一下这个设计模式是如何来实现的； 著名的spring框架的AOP的原理就是Java的动态代理机制； 在Spring中动态代理是实现有两种：JDK动态代理和Cglib动态代理，本篇分析的是Cglib动态代理的实现；</p><p>本博客关于Java动态代理相关内容直达链接：</p><ol><li><a href="https://www.guitu18.com/post/2018/05/27/15.html">JDK动态代理浅析</a></li><li><a href="https://www.guitu18.com/post/2018/05/27/16.html">Cglib动态代理浅析</a></li><li><a href="https://www.guitu18.com/post/2019/01/03/24.html">JDK动态代理深入理解分析并手写简易JDK动态代理（上）</a></li><li><a href="https://www.guitu18.com/post/2019/01/05/25.html">JDK动态代理深入理解分析并手写简易JDK动态代理（下）</a></li></ol><p>Java中的动态代理设计模式是非常经典且非常重要的设计模式之一，在感叹设计者的天才设计至于，我们想去探究一下这个设计模式是如何来实现的；</p><p>著名的spring框架的AOP的原理就是Java的动态代理机制；</p><p>在Spring中动态代理是实现有两种：JDK动态代理和Cglib动态代理，本篇分析的是Cglib动态代理的实现；</p><p>JDK动态代理之前已经做过分析了[ <a href="http://www.guitu18.com/se/java/2018-06-29/17.html">JDK动态代理浅析</a> ]，通过案例我们知道了，Java动态代理的强大之处；但是不难看出来使用JDK动态代理也有着它的局限性，JDK动态代理是在JVM内部动态的生成class字节码对象，但是JDK动态代理只能针对接口进行操作，也就是只能对接口的实现类去进行代理；</p><p>现在分析一下另一种常用的动态代理技术：Cglib动态代理；</p><blockquote><p>CGLIB(Code Generation Library)是一个开源项目；<br>是一个强大的，高性能，高质量的Code生成类库，它可以在运行期扩展Java类与实现Java接口；<br>CGLIB包的底层是通过使用一个小而快的字节码处理框架ASM，来转换字节码并生成新的类；<br>Cglib是针对类来实现代理的，原理是对指定的业务类生成一个子类，并覆盖其中业务方法实现代理；<br>所以Cglib可以为无接口的类直接做代理，当然有接口的类也是可以的并无影响。</p></blockquote><p>因为采用的是继承，所以不能对final修饰的类进行代理；Cglib的使用限制无疑要比JDK动态代理要宽松很多；</p><p>废话不多说，先上案例；</p><div class="post-button"><a class="btn" href="/post/2018/05/27/16.html#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><nav class="pagination"><a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="下一页"></i></a></nav></div><script>window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script><div id="container"></div><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"><script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script><script>var gitment=new Gitment({id:"",owner:"guitu18",repo:"guitu18.github.io",oauth:{client_id:"66faa58a99fdf928220c",client_secret:"19ec3ac8d7e88df3dd029d61c7d945ddd9fb9f9e"}});gitment.render("container")</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">guitu18</p><div class="site-description" itemprop="description">用实力让情怀落地</div></div><div class="cc-license motion-element" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div><div class="links-of-blogroll motion-element"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://www.yangqq.com/" title="https://www.yangqq.com/" rel="noopener" target="_blank">杨青博客</a></li><li class="links-of-blogroll-item"><a href="https://www.vpsor.cn/" title="https://www.vpsor.cn/" rel="noopener" target="_blank">硅云</a></li><li class="links-of-blogroll-item"><a href="https://www.yyjner.com/" title="https://www.yyjner.com/" rel="noopener" target="_blank">羽忆江南</a></li><li class="links-of-blogroll-item"><a href="http://www.jianhuax.com/" title="http://www.jianhuax.com/" rel="noopener" target="_blank">建华兄</a></li><li class="links-of-blogroll-item"><a href="http://www.python66.com/" title="http://www.python66.com/" rel="noopener" target="_blank">Python教程</a></li><li class="links-of-blogroll-item"><a href="https://haowenbo.com/" title="https://haowenbo.com/" rel="noopener" target="_blank">Easy Blog</a></li></ul></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2018 – <span itemprop="copyrightYear">2020</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">guitu18</span> <span class="post-meta-divider">|</span><span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span><script>function createTime(){var n=new Date("2018-03-05 08:58:41");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="本站已运行 "+dnum+" 天 ",document.getElementById("times").innerHTML=hnum+" 小时 "+mnum+" 分 "+snum+" 秒"}var now=new Date;setInterval("createTime()",250)</script><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-area-chart"></i> </span><span class="post-meta-item-text">站点总字数：</span> <span title="站点总字数">252k</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span class="post-meta-item-text">站点阅读时长 &asymp;</span> <span title="站点阅读时长">3:49</span></div><div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.2.0</div><span class="post-meta-divider">|</span><div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.6.0</div><span class="post-meta-divider">|</span> <span class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span>访客数 <span class="site-uv" title="总访客量"><span class="busuanzi-value" id="busuanzi_value_site_uv"></span> </span>人次 <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span>访问量 <span class="site-pv" title="总访问量"><span class="busuanzi-value" id="busuanzi_value_site_pv"></span> </span>次</span><div style="display:none"><script src="//s95.cnzz.com/z_stat.php?id=1278912793&web_id=1278912793"></script></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script><script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script></body></html><!-- rebuild by neat -->